{% extends 'base/base.html' %}

{% block title %}Buscar{% endblock %}

{% block content %}
    <div class="container">
        <h3>Hello {{request.user.username}}, What are you looking for?</h3>
        <form method="POST">
            <div class="input-group my-3">
                {% csrf_token %}
                <input type="text" class="form-control" name="query" placeholder="Enter the object's name" 
                    aria-label="Enter the object's name" aria-describedby="button-addon2" value="{{query}}">
                <button class="btn btn-primary btn-lg" type="submit" id="btnSearch" onClick="this.form.submit(); this.disabled=true;" >Search</button>
            </div>
        </form>

        {% if query %}
            <div class="mt-1 animate__animated animate__fadeIn">
                <p>{{ results|length }} objects found</p>
                {% for r in results %}
                    <div class="card mb-3 shadow-sm">
                        <div class="card-body pt-1 pb-3 px-3">
                            <a href="{% url 'main:details' r.id %}" class="fs-5">{{ r.name }}</a> <br>
                            <div class="px-3 text-muted">
                                {{ r.subcontainer.container.room.name }} > {{ r.subcontainer.container.name }} > {{ r.subcontainer.name }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>
{% endblock %}